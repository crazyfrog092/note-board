{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{361:function(t,e,s){\"use strict\";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[t.showModalExit?s(\"modal\",{on:{close:function(e){t.showModalExit=!1}}},[s(\"h3\",{attrs:{slot:\"header\"},slot:\"header\"},[t._v(\"Закрыть без сохранения\")]),t._v(\" \"),s(\"div\",{attrs:{slot:\"body\"},slot:\"body\"},[t._v(\"Все не сохраненные данные будут потеряны\")]),t._v(\" \"),s(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"button\",{staticClass:\"btn btn__warning mr-3\",on:{click:function(e){return t.cancel()}}},[t._v(\"Закрыть\")]),t._v(\" \"),s(\"button\",{staticClass:\"btn\",on:{click:function(e){t.showModalExit=!1}}},[t._v(\"Вернуться\")])])]):t._e(),t._v(\" \"),t.showModalDel?s(\"modal\",{on:{close:function(e){t.showModalDel=!1}}},[s(\"h3\",{attrs:{slot:\"header\"},slot:\"header\"},[t._v(\"Удаление заметки\")]),t._v(\" \"),s(\"div\",{attrs:{slot:\"body\"},slot:\"body\"},[t._v(\"Вы действительно хотите удалить эту заметку?\")]),t._v(\" \"),s(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"button\",{staticClass:\"btn btn__danger mr-3\",on:{click:function(e){return t.delNote(t.noteKey)}}},[t._v(\"Удалить\")]),t._v(\" \"),s(\"button\",{staticClass:\"btn\",on:{click:function(e){t.showModalDel=!1}}},[t._v(\"Отмена\")])])]):t._e(),t._v(\" \"),t._m(0),t._v(\" \"),s(\"div\",{staticClass:\"note-edit-box\"},[s(\"div\",{staticClass:\"note-item-box\"},[s(\"label\",{attrs:{for:\"note-name\"}},[t._v(\"Заголовок:\")]),t._v(\" \"),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:t.noteData.header,expression:\"noteData.header\",modifiers:{lazy:!0}}],attrs:{type:\"text\",id:\"note-name\"},domProps:{value:t.noteData.header},on:{change:function(e){return t.$set(t.noteData,\"header\",e.target.value)}}}),t._v(\" \"),s(\"button\",{staticClass:\"xs-mt-2 btn btn__danger\",on:{click:function(e){t.showModalDel=!0}}},[t._v(\"Удалить заметку\"),s(\"i\",{staticClass:\"ml-1 las la-trash\"})])]),t._v(\" \"),s(\"div\",{staticClass:\"note-item-box\"},[s(\"div\",{attrs:{for:\"note-name\"}},[t._v(\"Пункты:\")]),t._v(\" \"),s(\"button\",{staticClass:\"ml-3 btn\",on:{click:function(e){return t.addSubnote()}}},[t._v(\"Добавить\"),s(\"i\",{staticClass:\"ml-1 las la-plus\"})]),t._v(\" \"),s(\"button\",{staticClass:\"ml-3 btn btn-mini\",on:{click:function(e){return t.historyBack()}}},[s(\"i\",{staticClass:\"las la-undo-alt\"})]),t._v(\" \"),s(\"button\",{staticClass:\"ml-1 btn btn-mini\",on:{click:function(e){return t.historyNext()}}},[s(\"i\",{staticClass:\"las la-redo-alt\"})])]),t._v(\" \"),t._l(t.noteData.subnotes,(function(e,n){return s(\"div\",{key:n,staticClass:\"note-item-box\"},[s(\"label\",{staticClass:\"control\"},[s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.checked,expression:\"subnote.checked\"}],attrs:{type:\"checkbox\"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(s){var n=e.checked,o=s.target,i=!!o.checked;if(Array.isArray(n)){var a=t._i(n,null);o.checked?a<0&&t.$set(e,\"checked\",n.concat([null])):a>-1&&t.$set(e,\"checked\",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(e,\"checked\",i)}}}),t._v(\" \"),t._m(1,!0)]),t._v(\" \"),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:e.name,expression:\"subnote.name\",modifiers:{lazy:!0}}],attrs:{type:\"text\"},domProps:{value:e.name},on:{change:function(s){return t.$set(e,\"name\",s.target.value)}}}),t._v(\" \"),s(\"button\",{staticClass:\"btn btn__danger btn-mini\",on:{click:function(e){return t.delSubnote(n)}}},[s(\"i\",{staticClass:\"las la-trash\"})])])})),t._v(\" \"),s(\"div\",{staticClass:\"note-item-box\"},[s(\"button\",{staticClass:\"btn btn__success mr-3\",on:{click:function(e){return t.saveNote()}}},[t._v(\"Сохранить\"),s(\"i\",{staticClass:\"ml-1 las la-check\"})]),t._v(\" \"),s(\"button\",{staticClass:\"btn btn__warning\",on:{click:function(e){t.showModalExit=!0}}},[t._v(\"Отмена\"),s(\"i\",{staticClass:\"ml-1 las la-times\"})])])],2)],1)};function o(t,e,s,n,o,i,a){try{var r=t[i](a),c=r.value}catch(t){return void s(t)}r.done?e(c):Promise.resolve(c).then(n,o)}n._withStripped=!0;var i={mounted:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(\"new\"===e.noteKey){t.next=4;break}return t.next=3,e.$store.dispatch(\"fetchNoteInfo\",e.noteKey);case 3:e.noteData=e.$store.getters.noteInfo;case 4:e.history.push(JSON.stringify(e.noteData));case 5:case\"end\":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(n,i){var a=t.apply(e,s);function r(t){o(a,n,i,r,c,\"next\",t)}function c(t){o(a,n,i,r,c,\"throw\",t)}r(void 0)}))})()},computed:{historyLength:function(){return this.history.length-1}},watch:{noteData:{handler:function(){this.historyIter!==this.historyLength||this.checkLast||(this.history.push(JSON.stringify(this.noteData)),this.historyIter++),this.checkLast=!1,this.history[this.historyIter]!==JSON.stringify(this.noteData)&&(this.history.splice(this.historyIter+1),this.history.push(JSON.stringify(this.noteData)),this.historyIter++)},deep:!0}},methods:{historyBack:function(){this.historyIter>0&&(this.historyIter--,this.noteData=JSON.parse(this.history[this.historyIter]))},historyNext:function(){this.historyIter<this.historyLength&&(this.historyIter++,this.noteData=JSON.parse(this.history[this.historyIter]),this.historyIter===this.historyLength&&(this.checkLast=!0))},addSubnote:function(){this.noteData.subnotes.push({name:\"\",checked:!1})},delSubnote:function(t){this.noteData.subnotes.splice(t,1)},saveNote:function(){this.$store.dispatch(\"saveNote\",{note:this.noteData,id:this.noteKey}),this.$router.push({name:\"main\"})},delNote:function(t){this.$store.dispatch(\"delNote\",t),this.$router.push({name:\"main\"})},cancel:function(){this.$router.push({name:\"main\"})}},data:function(){return{showModalExit:!1,showModalDel:!1,noteKey:this.$route.params.id,noteData:{header:\"\",subnotes:[]},history:[],historyIter:0,checkLast:!1}}},a=s(27),r=Object(a.a)(i,n,[function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"mb-3 ml-3\"},[e(\"h1\",[this._v(\"Редактирование\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"checkbox\"},[e(\"i\",{staticClass:\"check las la-check\"}),e(\"i\",{staticClass:\"notcheck las la-times\"})])}],!1,null,\"3594053a\",null);r.options.__file=\"src/components/Edit.vue\";e.default=r.exports}}]);","extractedComments":[]}